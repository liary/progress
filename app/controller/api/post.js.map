{
    "version": 3,
    "sources": [
        "../../../src/controller/api/post.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "limama",
        "api",
        "__before",
        "loginStatus",
        "islogin",
        "loginInfo",
        "status",
        "message",
        "getListAction",
        "model",
        "res",
        "where",
        "page",
        "get",
        "countSelect",
        "success",
        "add",
        "post",
        "user",
        "session",
        "isEmpty",
        "login",
        "ip"
    ],
    "mappings": ";;AAAAA,OAAOC,OAAP,GAAiB,cAAcC,MAAMC,MAAN,CAAaC,GAA3B,CAA+B;AACzCC,SAAN,GAAiB;AAAA;;AAAA;AAChB,SAAMC,cAAc,MAAM,MAAKC,OAAL,EAA1B;AACA,SAAKC,SAAL,GAAiB;AAChBC,YAAQH,WADQ;AAEhBI,aAAS;AACR,QAAG,KADK;AAER,QAAG,KAFK;AAGR,QAAG;AAHK,MAIPJ,WAJO;AAFO,IAAjB;AAFgB;AAUhB;AACKK,cAAN,GAAsB;AAAA;;AAAA;AACrB,SAAMC,QAAQ,OAAKA,KAAL,CAAW,MAAX,CAAd;AACA;AACA,SAAMC,MAAM,MAAMD,MAAME,KAAN,CAAY;AAC7BL,YAAQ;AADqB,IAAZ,EAEfM,IAFe,CAEV,OAAKC,GAAL,CAAS,MAAT,KAAoB,CAFV,EAEa,EAFb,EAEiBC,WAFjB,EAAlB;AAGA;AACA;AACA;AACA;AACA,UAAKC,OAAL,CAAaL,GAAb;AAVqB;AAYrB;;AAEKM,IAAN,GAAY;AAAA;;AAAA;AACX,SAAMP,QAAQ,OAAKA,KAAL,CAAW,cAAX,CAAd;AACA,SAAMC,MAAM,MAAMD,MAAMO,GAAN,CAAU,OAAKC,IAAL,EAAV,CAAlB;AACA,UAAKF,OAAL,CAAaL,GAAb;AAHW;AAIX;;AAED;;;;;AAKMN,QAAN,GAAgB;AAAA;;AAAA;AACf,SAAMc,OAAO,MAAM,OAAKC,OAAL,CAAa,UAAb,CAAnB;AACA,OAAIT,MAAM,CAAV;AACA,OAAI,CAACX,MAAMqB,OAAN,CAAcF,IAAd,CAAD,IAAwBA,KAAKG,KAAjC,EAAwC;AACvCX,UAAMQ,KAAKI,EAAL,KAAY,OAAKA,EAAjB,GAAsB,CAAtB,GAA0B,CAAhC;AACA;AACD,UAAOZ,GAAP;AANe;AAOf;AA5C8C,CAAhD",
    "file": "../../../src/controller/api/post.js",
    "sourcesContent": [
        "module.exports = class extends think.limama.api {\n\tasync __before() {\n\t\tconst loginStatus = await this.islogin();\n\t\tthis.loginInfo = {\n\t\t\tstatus: loginStatus,\n\t\t\tmessage: {\n\t\t\t\t0: '未登陆',\n\t\t\t\t1: '已登陆',\n\t\t\t\t2: '账号在别处登陆'\n\t\t\t}[loginStatus]\n\t\t};\n\t}\n\tasync getListAction() {\n\t\tconst model = this.model('post');\n\t\t// const res = await model.getList(page);\n\t\tconst res = await model.where({\n\t\t\tstatus: 1\n\t\t}).page(this.get('page') || 1, 10).countSelect();\n\t\t// newUser.createTime = parseInt(new Date().getTime().toString().slice(0, 10));\n\t\t// newUser.password = think.md5(newUser.password);\n\t\t// const res = await model.adduser(newUser);\n\t\t// model.adduser(newUser);\n\t\tthis.success(res);\n\t\t\n\t}\n\n\tasync add() {\n\t\tconst model = this.model('content/post');\n\t\tconst res = await model.add(this.post());\n\t\tthis.success(res);\n\t}\n\t\n\t/**\n\t * 判断是否登陆\n\t * \n\t * @returns {number} 2: 账号在别处登陆 0: 未登陆 1: 已登陆\n\t */\n\tasync islogin() {\n\t\tconst user = await this.session('userInfo');\n\t\tlet res = 0;\n\t\tif (!think.isEmpty(user) && user.login) {\n\t\t\tres = user.ip === this.ip ? 1 : 2;\n\t\t}\n\t\treturn res;\n\t}\n}"
    ]
}